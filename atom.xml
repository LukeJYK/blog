<?xml version="1.0" encoding="utf-8"?>


<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="zh-CN">
    <title type="text">宁静致远</title>
    <subtitle type="html">Yankai&#39;s Blog</subtitle>
    <updated>2021-08-04T23:07:15&#43;08:00</updated>
    <id>/</id>
    <link rel="alternate" type="text/html" href="/" />
    <link rel="self" type="application/atom&#43;xml" href="/atom.xml" />
    <author>
            <name>LukeJiang</name>
            <uri>/</uri>
            
                <email>yankai.jiang@northwestern.edu.cn</email>
            </author>
    <rights>本文采用 [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh) 许可协议，转载请注明出处。</rights>
    <generator uri="https://gohugo.io/" version="0.83.1">Hugo</generator>
        <entry>
            <title type="text">端午节游清河坊</title>
            <link rel="alternate" type="text/html" href="/life/travels/hefang-street-in-the-dragon-boat-festival-2021/" />
            <id>/life/travels/hefang-street-in-the-dragon-boat-festival-2021/</id>
            <updated>2021-08-01T13:03:15&#43;08:00</updated>
            <published>2021-08-01T13:03:15&#43;08:00</published>
            <author>
                    <name>LukeJiang</name>
                    <uri>https://lukejyk.github.io/cnblog</uri>
                    <email>yankai.jiang@northwestern.edu.cn</email>
                    </author>
            <rights>本文采用 [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh) 许可协议，转载请注明出处。</rights><summary type="html">七月中旬，突然想和家里人出去走走</summary>
            
                <content type="html">&lt;p&gt;&lt;img src=&#34;/images/hefang-street-0.jpg&#34; alt=&#34;hefang-street-0.jpg&#34; title=&#34;鼓楼&#34;&gt;&lt;/p&gt;
&lt;p&gt;七月中旬，突然想和家里人出去走走&lt;/p&gt;
</content>
            
            
            
                
                
                
                    
                    
                    
                        
                            <category scheme="/life/travels/" term="life\travels\" label="life\travels\" />
                        
                    
                
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="/tags/guizhou/" term="贵客" label="贵客" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">批量压缩图片并添加水印的方法</title>
            <link rel="alternate" type="text/html" href="/tech/computer/add-watermark-to-images/" />
            <id>/tech/computer/add-watermark-to-images/</id>
            <updated>2021-06-19T20:57:45&#43;08:00</updated>
            <published>2021-06-19T17:20:03&#43;08:00</published>
            <author>
                    <name>LukeJiang</name>
                    <uri>https://lukejyk.github.io/cnblog</uri>
                    <email>yankai.jiang@northwestern.edu.cn</email>
                    </author>
            <rights>本文采用 [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh) 许可协议，转载请注明出处。</rights><summary type="html">从去年年末开始，我陆陆续续收集了很多卡牌，也在网站上展示了部分原创卡。在拍摄卡牌的时候，当然是要尽量呈现出卡牌实物的色彩效果。但将高清的图片放在网上进行展示，存在盗用的风险。这样可能会给卡牌的出品方带来负面影响。所以我就考虑在图片上添加浅色的水印。几百张图，如果一个个分别用 PhotoShop 先压缩图片再添加水印，太……</summary>
            
                <content type="html">&lt;p&gt;从去年年末开始，我陆陆续续收集了很多卡牌，也在网站上展示了部分原创卡。在拍摄卡牌的时候，当然是要尽量呈现出卡牌实物的色彩效果。但将高清的图片放在网上进行展示，存在盗用的风险。这样可能会给卡牌的出品方带来负面影响。所以我就考虑在图片上添加浅色的水印。几百张图，如果一个个分别用 PhotoShop 先压缩图片再添加水印，太麻烦了，直接写个 Python 脚本吧。&lt;/p&gt;
&lt;h2 id=&#34;引入库文件&#34;&gt;引入库文件&lt;/h2&gt;
&lt;p&gt;由于是图片处理类的脚本，引入的库如下所示。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;PIL&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ImageDraw&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ImageFont&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;os&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;读取文件列表&#34;&gt;读取文件列表&lt;/h2&gt;
&lt;p&gt;首先设置需要读取的图片文件夹地址，以及输出图片的地址。目前只需要用到读取地址，输出地址还用不到。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;n&#34;&gt;imgOpen&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;test/old&amp;#39;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 读取地址&lt;/span&gt;
&lt;span class=&#34;n&#34;&gt;imgSave&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;test/new&amp;#39;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# 输出地址&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;然后用以下代码实现将文件夹下的所有图片名存放在一个列表中。文件名的后缀被删除。这样方便后续图片输出的时候统一命名。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;n&#34;&gt;imgList&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;listdir&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;imgOpen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;

&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;index&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;imgList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;imgList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;imgList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;][:&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;按照这样的思路，我们写好处理图片的函数，在主程序中，只需要使用循环 &lt;code&gt;for index in range(len(imgList))&lt;/code&gt; 依次处理每张图片并输出就可以了。&lt;/p&gt;
&lt;h2 id=&#34;添加水印&#34;&gt;添加水印&lt;/h2&gt;
&lt;p&gt;这里我要添加的水印样式是成 45 度周期分布在整张图片上的水印。需要先设置添加的字符的字体、字号、透明度，再将字符覆盖到图片上。这里我使用了 Google Fonts 开源的 Berkshire Swash 英文字体。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;add_text_to_image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;font&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ImageFont&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;truetype&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;BerkshireSwash-Regular.ttf&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;54&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
   
    &lt;span class=&#34;c1&#34;&gt;# 添加背景&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;new_img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;RGBA&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;new_img&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;paste&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
   
    &lt;span class=&#34;c1&#34;&gt;# 添加水印&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;font_len&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;rgba_image&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new_img&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;convert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;RGBA&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;text_overlay&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;RGBA&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rgba_image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;image_draw&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ImageDraw&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Draw&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text_overlay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
   
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rgba_image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;font_len&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;30&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;rgba_image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;image_draw&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;font&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;font&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fill&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;255&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;50&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;text_overlay&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text_overlay&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rotate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;45&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;image_with_text&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;alpha_composite&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rgba_image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text_overlay&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
   
    &lt;span class=&#34;c1&#34;&gt;# 裁切图片&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;image_with_text&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;image_with_text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;crop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;image_with_text&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这一步由于涉及到了透明度的计算，所以在读取 JPG 格式的图片后，输出的图片变成了 PNG 格式。通过对比两个格式的图片可知，添加水印后的 PNG 图片要远大于原始的 JPG 图片。这显然是不理想的。虽然说 PNG 在图片的质量上要比 JPG 格式好很多，但我拍摄的原本就是 JPG 图片，转成 PNG 没什么意义，并且我要将最终的图片放在网站上，如果图片文件太大，加载网页的时候就会很慢。因此，我还需要对输出的 PNG 图片做压缩处理，再次转换成 JPG 图片。&lt;/p&gt;
&lt;h2 id=&#34;图片格式转换&#34;&gt;图片格式转换&lt;/h2&gt;
&lt;p&gt;从 PNG 转换到 JPG 当然不仅仅是改个文件名的后缀那么简单。 PNG 图像涉及到了透明度的信息，但 JPG 图像没有。所以我们需要将透明度信息删除。此外，顺便将画质适当降低一些以便压缩图片文件的体积。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;png2jpg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pngPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pngPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
    &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;w&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;infile&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pngPath&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;outfile&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;splitext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;infile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;.jpg&amp;#34;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;infile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;resize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;w&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;h&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ANTIALIAS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;try&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;split&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;g&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;a&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;split&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;merge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;RGB&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;g&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;convert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;RGB&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;outfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;quality&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;70&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;remove&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pngPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;convert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;RGB&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;outfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;quality&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;70&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;os&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;remove&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pngPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;outfile&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;except&lt;/span&gt; &lt;span class=&#34;ne&#34;&gt;Exception&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;PNG 转换 JPG 错误&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;e&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;缩放图片到指定尺寸&#34;&gt;缩放图片到指定尺寸&lt;/h2&gt;
&lt;p&gt;原始图片的尺寸比较大，高度超过了 2000 像素，由于屏幕分辨率的限制，通常在网页上呈现的时候不需要太大的尺寸。所以我计划将图片高度压缩至 1600 像素，宽度按照相同比例缩放。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;def&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;resizeByHeight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;jpgPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;newHeight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;):&lt;/span&gt; 
    &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;jpgPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
    &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;ratio&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;newHeight&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;x_s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ratio&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;y_s&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;newHeight&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;out&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;resize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x_s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;y_s&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ANTIALIAS&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; 
    &lt;span class=&#34;n&#34;&gt;out&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;jpgPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id=&#34;主程序&#34;&gt;主程序&lt;/h2&gt;
&lt;p&gt;最后，就是主程序的编写。&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;vm&#34;&gt;__name__&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;index&lt;/span&gt; &lt;span class=&#34;ow&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;imgList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)):&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;fileName&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;imgList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;openAddress&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;imgOpen&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;/&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fileName&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;.jpg&amp;#39;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;saveAddress&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;imgSave&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;/&amp;#39;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fileName&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;.png&amp;#39;&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;resizeByHeight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;openAddress&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1600&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;img&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Image&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;open&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;openAddress&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;im_after&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;add_text_to_image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;img&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;sa&#34;&gt;u&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Guan Qirui Collection&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;im_after&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;save&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;saveAddress&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;png2jpg&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;saveAddress&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fileName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;最终效果如下图所示。图片使用了燎原三国的关羽人物卡。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/images/liaoyuan-sanguo-guanyu.jpg&#34; alt=&#34;liaoyuan-sanguo-guanyu.jpg&#34;&gt;&lt;/p&gt;
</content>
            
            
            
                
                
                
                    
                    
                    
                        
                            <category scheme="/tech/computer/" term="tech\computer\" label="tech\computer\" />
                        
                    
                
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="/tags/image-processing/" term="图像处理" label="图像处理" />
                            
                        
                            
                            
                            
                                <category scheme="/tags/python/" term="Python" label="Python" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">All It Takes Is One Bad Day</title>
            <link rel="alternate" type="text/html" href="/life/films/all-it-takes-is-one-bad-day/" />
            <id>/life/films/all-it-takes-is-one-bad-day/</id>
            <updated>2020-02-14T12:46:23&#43;08:00</updated>
            <published>2020-02-13T12:46:23&#43;08:00</published>
            <author>
                    <name>LukeJiang</name>
                    <uri>https://lukejyk.github.io/cnblog</uri>
                    <email>yankai.jiang@northwestern.edu.cn</email>
                    </author>
            <rights>本文采用 [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh) 许可协议，转载请注明出处。</rights><summary type="html">当一个人在一天之内失去了亲情、友情、爱情，甚至梦想，他会变成什么模样？</summary>
            
                <content type="html">&lt;p&gt;哥谭，一座充满罪恶的都市。在《蝙蝠侠》系列电影中，不同导演的为观众展现出了不同风格的哥谭。上世纪八九十年代电影中的哥谭是哥特风或是赛博朋克风，在诺兰黑暗骑士三部曲中哥谭是写实风——尽管风格各异，但这些哥谭都有一个共同点：由富人家族控制的企业（比如韦恩家族），由黑帮控制的政府（比如法尔科内），底层生活的普通人（比如戈登局长），还有一些阿卡姆精神病人（比如小丑）。这就导致了贫富差距问题突出，穷人对于富人不满的情绪越来越多。&lt;/p&gt;
&lt;p&gt;虽然《小丑》改编自 DC 漫画中蝙蝠侠的头号反派小丑的故事，但这部电影并不属于超级英雄电影。导演只是借助于漫画中的人物姓名和人物关系讲述了一个生活在社会下层的普通人，如何被这个社会塑造成一个制造混乱的疯子的故事。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/images/joker-0.jpg&#34; alt=&#34;joker-0.jpg&#34;&gt;&lt;/p&gt;
&lt;p&gt;关于小丑的起源，在漫画中也出现了很多种说法。不同版本的小丑有着不同的起源故事，谁也不知道哪一个是真的，哪一个是小丑自己编造的。目前最有名的起源故事是《致命玩笑》中的马戏团小丑，他经历了很糟糕的一天，最终在化工厂的逃亡中滑落化学池，化学药剂腐蚀了他的皮肤，摧毁了他面部的神经，让他成为了一个皮肤苍白的笑面人。和《致命玩笑》的起源故事类似，《小丑》电影中的亚瑟原本也是一个社会下层的普通人。他的工作是扮演小丑，让他饱受别人歧视的是，他有一种病——只要情绪有所起伏，就会不受控制地发出笑声。甚至有些人认为这种古怪的笑声是他装出来的，突然发笑为了表现小丑的滑稽。&lt;/p&gt;
&lt;p&gt;亚瑟有一个梦想，成为一名脱口秀演员，能够讲出让人欢乐的笑话。他有一个记事本，记事本中记录着他收集到的笑话。他的偶像是默里秀的主持人默里·富兰克林。他经常幻想着自己能够参加这个脱口秀节目，幻想着默里能够关注到他，将他请上舞台，鼓励着他要坚持自己的梦想。可最后，他意识到，默里只是把他当作一个笑话，并没有真正鼓励过他。所以，失落的他在默里秀的电视直播中杀了默里。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/images/joker-1.jpg&#34; alt=&#34;joker-1.jpg&#34; title=&#34;亚瑟幻想着默里在舞台上鼓励自己&#34;&gt;&lt;/p&gt;
&lt;p&gt;和亚瑟一起扮演小丑的朋友，看到他经常被人欺负，就送给他一把枪，希望他能够保护好自己。可正是因为这把枪，他在医院为小孩表演节目的时候掉落出来，失去了自己的工作。这把枪，成为了罪恶之枪。他用这把枪，在地铁中杀掉了三个殴打他的社会精英。引来了警察的调查。为了避免一些不必要的麻烦，他选择杀掉了这位朋友。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/images/joker-2.jpg&#34; alt=&#34;joker-2.jpg&#34; title=&#34;地铁上失去工作的亚瑟&#34;&gt;&lt;/p&gt;
&lt;p&gt;在上楼的电梯里，亚瑟遇见了一个和他同楼层的女邻居，那个邻居向他做出了善意的微笑，这让情绪低落的他有了一丝丝幸福。他觉得邻居对他有好感。他开始幻想，幻想着邻居陪他一起逛街，和他一起照顾母亲，给他精神上的鼓励。可在他精神落魄，真正需要这位邻居的安慰的时候，这位邻居却对他闯入家中的举动感动恐慌。他这时候才意识到原来和她发生过的一切都是自己的幻想。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/images/joker-3.jpg&#34; alt=&#34;joker-3.jpg&#34; title=&#34;亚瑟在电梯里遇到的邻居&#34;&gt;&lt;/p&gt;
&lt;p&gt;他的母亲一直在向托马斯·韦恩写信求助，认为托马斯·韦恩一定会帮助他们母子脱离穷困潦倒的生活。他从母亲的信中了解到，自己是母亲和托马斯·韦恩的私生子。他来到了韦恩庄园，在门口见到了布鲁斯·韦恩。那道门，就像是一堵墙，将富裕和贫困隔离，跨过那扇门，他将拥有一切。可他在阿卡姆精神病院的母亲档案中得知自己的母亲患有严重的妄想症，还虐待自己的孩子。这个孩子就是他自己——因为小时候的事情过于痛苦和久远，他选择了忘记。他母亲告诉他的一切，都是假的。他开始痛恨自己的母亲，亲手用枕头捂死了她。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/images/joker-4.jpg&#34; alt=&#34;joker-4.jpg&#34; title=&#34;亚瑟来到韦恩庄园遇到布鲁斯&#34;&gt;&lt;/p&gt;
&lt;p&gt;在一次次的杀人中，亚瑟感受到了无比的轻松，他不再有任何牵挂。他内心的小丑人格不断侵蚀着他的理智，在开枪杀死默里的那一刻，他彻底成为了小丑。他成为了生活在哥谭底层的普通人信奉的对象，他成为了阶级斗争的领袖，许许多多的普通人开始带着小丑的面具对富人政权进行抗议。那一个夜晚，哥谭暴乱，剧院正在上映《佐罗》电影，布鲁斯·韦恩的父母在混乱之中被杀害，小丑迎来了自己的辉煌。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/images/joker-5.jpg&#34; alt=&#34;joker-5.jpg&#34; title=&#34;亚瑟成为了真正的小丑&#34;&gt;&lt;/p&gt;
&lt;p&gt;在诺兰导演的《黑暗骑士》中，希斯·莱杰塑造出了近乎完美的小丑形象，演员的意外死亡也让希斯·莱杰版本的小丑成为了「神」一般的存在。尽管在后来的影视作品中，也有不少的演员饰演过小丑这一角色，但都无法达到《黑暗骑士》的高度。幸运的是，华金·菲尼克斯接下了这一角色，他塑造了属于他自己的独特风格的小丑，又创造了一个小丑角色的巅峰。他也凭借这部电影，获得了第 92 届奥斯卡金像奖最佳男主角的奖项。&lt;/p&gt;
&lt;p&gt;小丑是蝙蝠侠最有名的反派，似乎「小丑」一词，就代表着「混乱」。小丑和蝙蝠侠就像是一枚硬币的两面。他们都经历过过最糟糕的一天，他们都是疯子，只不过蝙蝠侠选择了在悲剧和混乱中寻找一些正义，小丑选择了成为混乱的本身。他们看待世界的方式不同。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/images/the-killing-joke.jpg&#34; alt=&#34;the-killing-joke.jpg&#34; title=&#34;《致命玩笑》结尾，小丑给蝙蝠侠讲的笑话&#34;&gt;&lt;/p&gt;
</content>
            
            
            
                
                
                
                    
                    
                    
                        
                            <category scheme="/life/films/" term="life\films\" label="life\films\" />
                        
                    
                
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="/tags/class-contradiction/" term="阶级矛盾" label="阶级矛盾" />
                            
                        
                            
                            
                            
                                <category scheme="/tags/crime/" term="犯罪" label="犯罪" />
                            
                        
                            
                            
                            
                                <category scheme="/tags/cyberpunk/" term="赛博朋克" label="赛博朋克" />
                            
                        
                    
                
            
        </entry>
    
        <entry>
            <title type="text">从动物到上帝</title>
            <link rel="alternate" type="text/html" href="/life/books/a-brief-history-of-humankind/" />
            <id>/life/books/a-brief-history-of-humankind/</id>
            <updated>2020-04-11T16:38:49&#43;08:00</updated>
            <published>2019-09-07T16:38:49&#43;08:00</published>
            <author>
                    <name>LukeJiang</name>
                    <uri>https://lukejyk.github.io/cnblog</uri>
                    <email>yankai.jiang@northwestern.edu.cn</email>
                    </author>
            <rights>本文采用 [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh) 许可协议，转载请注明出处。</rights><summary type="html">《人类简史：从动物到上帝》读书笔记</summary>
            
                <content type="html">&lt;h2 id=&#34;认知革命&#34;&gt;认知革命&lt;/h2&gt;
&lt;h3 id=&#34;人类一种也没什么特别的动物&#34;&gt;人类：一种也没什么特别的动物&lt;/h3&gt;
&lt;p&gt;作者将历史划分为三大革命：&lt;/p&gt;
&lt;blockquote class=&#34;quote&#34;&gt;
        &lt;p&gt;大约 7 万年前，「认知革命」让历史正式启动。大约 12000 年前，「农业革命」让历史加速发展，而到了大约不过 500 年前，「科学革命」可以说是让历史画下句号而另创新局。&lt;/p&gt;&lt;/blockquote&gt; 
&lt;p&gt;这本书也是分为这三大革命进行讲述的。&lt;/p&gt;
&lt;p&gt;初中学生物的时候，我们知道了界门纲目科属种的划分，也认识到了生殖隔离。生物的命名都是用拉丁文，每个名字都是由属名和种名两部分组成，比如人类，叫做 Homo sapiens，人属人种，又叫智人。我们经常说，人类的存在是一种奇迹，而现如今和人类基因最相近的动物，是黑猩猩。但二者的差异也是非常大的。不难想象，在很久以前，地球上存在更多人类的近亲，不仅仅是智人一种。&lt;/p&gt;
&lt;p&gt;作者将我们统称为智人，而人类则指的是人属的所有成员。由于地球各地区的气候不同，人类朝着不同的方向进化，欧洲和西亚的人类为尼安德特人，肌肉发达，身材魁梧，适应亚欧大陆冰河时期的寒冷气候，东亚则是直立人，印度尼西亚的爪哇岛上是梭罗人，很适应热带的生活环境，而在弗洛里斯岛上，则存在身材矮小的弗洛里斯人。当然还有其他地区的不同的人种，这里不再一一列举。总的来说，在当时，亚非欧地区，存在着各式各样的人种，这些人种并非是线性发展的，由某一种演化成为另一种，而是在同一时间就存在的。&lt;/p&gt;
&lt;p&gt;曾经我在科教频道上看过一期讲解人类进化的节目。人的大脑脑容量随着时间的推移越来越大，我们可以通过头颅的对比，发现现代人与曾经的人类的差异，头颅越来越大，而颚部越来越小。脑容量的增加是进化的趋势，人类懂得了制造和使用工具，直立行走，解放了前肢，一些器官也随之退化。记得几年前在网络上看过一张预测未来人类形态的图，人类的头颅变得更大，四肢变得更纤细，完全就是现在人们想象到的外星人的模样。另外，由于头颅变大，分娩死亡的风险也加大，人类只能将婴儿早产。人类产子的时间较其他哺乳动物都要短，这也导致了婴儿出生后还需要更为贴心的照顾才能成长。婴儿的可塑性也比其他哺乳动物强。&lt;/p&gt;
&lt;p&gt;曾经的人类处于食物链的中层，需要躲避猛兽，而从智人开始捕杀大型猛兽开始，人类站在了食物链的顶端。作者说这让生态系统猝不及防，人类自己也不知所措。人类不断的猎杀动物，改造身边的环境。但我觉得，一切的进化都属于自然发展的结果。人类站到了金字塔顶端也算是自然的一种安排。&lt;/p&gt;
&lt;p&gt;关于现代人类是由过去哪个人种发展而来的，有两种理论，一是混种繁衍理论，二是替代理论，前者表明现在的人类是过去智人与其他人种的混血，后者表示不同人种之间存在生殖隔离，只有一种人将另一种完全替代。最新的研究表明现代人的 DNA 中存在其他人种的基因，当然，研究仍在继续当中。那么为什么其他的人种现在都不存在了，只剩下我们这一种，成为了「天选之子」。可能是自然的演变，物竞天择，导致这些人种无法适应环境的发展，被自然淘汰，但也可能是因为智人的强大，对其他人种进行了屠杀。我自己比较认同屠杀这一种说法。因为任何生物的第一层面的追求是活着，是生存。就像人们学会了取火，开始大面积地放火烧林扩大自己的领域，当与另一类人种接触，人们开始感到威胁，因为对方和野兽不同，野兽不能像人类一样思考，但其他人种可以，不同人种之间开始抢夺资源，人们就会开始屠杀，只有将这一种威胁消灭，人们才会安稳地生活。这是绝对会发生的，因为当今文明社会，还会有不同种族之间的歧视与暴力冲突。&lt;/p&gt;
&lt;p&gt;&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;/life/books/a-brief-history-of-humankind/#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;img src=&#34;/images/chauvet-cave.jpg&#34; alt=&#34;chauvet-cave.jpg&#34; title=&#34;肖维岩洞岩画&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;知善恶树&#34;&gt;知善恶树&lt;/h3&gt;
&lt;p&gt;作者在第一章的末尾提出一个核心论点：&lt;/p&gt;
&lt;blockquote class=&#34;quote&#34;&gt;
        &lt;p&gt;智人之所以能征服世界，是因为有独特的语言。&lt;/p&gt;&lt;/blockquote&gt; 
&lt;p&gt;在某个特定时期，智人的认知能力有了革命性的发展，出现了新的思维和沟通方式，这就是所谓的认知革命。这是非常偶然的一次突变，用作者的话来说：&lt;/p&gt;
&lt;blockquote class=&#34;quote&#34;&gt;
        &lt;p&gt;几乎就像是吃了《圣经》里那颗知善恶树的果实一样。&lt;/p&gt;&lt;/blockquote&gt; 
&lt;p&gt;我们常说人会说话，而其他动物不会说话。如果说仅仅从发声交流这一层面来说，这样是不恰当的。因为很多动物都能够使用特定的声音、动作进行交流。准确地说，人类会说话，是会灵活地使用自己的发声器官。&lt;/p&gt;
&lt;blockquote class=&#34;quote&#34;&gt;
        &lt;p&gt;虽然我们只能发出有限的声音，但组合起来却能够产生无限多的句子，这些句子各有不同的含义。于是，我们就能吸收、储存和沟通惊人的信息量，并了解我们周遭的世界。&lt;/p&gt;&lt;/blockquote&gt; 
&lt;p&gt;作者先是举了狮子和野牛的例子，然后又提出，人类之间的语言交流最重要的信息不是关于野牛和狮子，而是关于人类自己。人类的语言是一种八卦的工具。第一次看到这种说法，觉得用「八卦」不太恰当，但仔细想一想，确实「八卦」是人与人之间交流最主要的部分。人们需要在自己生活的圈子里知道谁讨厌谁，谁在和谁交往，谁很诚实，谁又是骗子。这些内容，有助于自身在圈子当中的生存。&lt;/p&gt;
&lt;p&gt;除此之外，人类的语言交流还有一个特点，就是能够传达一些虚构的事物。如果说其他动物之间会进行交流，他们也只能交流一些实际存在的事物，比如在哪里存在实物，是否有威胁之类的。但人类因为认知的发展，能够谈论自己想象的事物，因此传说、神话、宗教之类的出现在生活中。人们能够通过语言，将自己想象的事物传达给他人，然后一群人就会一起编织出一个完整的体系，让人们能够合作。一个部落、一个社区、一个公司的形成都需要人与人之间的语言沟通，通过交流，熟悉彼此，进而维持了一个团体的稳定。人类的团体在 150 人以下的时候，通过彼此之间的交流就能够运作顺畅，一旦超过这个人数，就需要一定的阶层、规章制度。作者提出了智人之所以能够形成一个上亿人口的帝国，很可能就是依靠虚构的故事，例如宗教故事，让那些信奉同一宗教的人拥有相同的认知，彼此之间取得良好的信任。&lt;/p&gt;
&lt;p&gt;作者在这一章重点举了标致汽车的例子。然后延伸出了公司的领导与公司本身的性质。&lt;/p&gt;
&lt;p&gt;标致公司是我们的一个集体想象，我们无法明确指着它，因为它并不是一个实体对象，而是以一种法律实体的方式存在。在没有这种概念之前，如果你领导了一个小的团体，你的团体给别人造成了损失，你自身就会受到影响，你需要承担所有的责任。而标致公司则是有限公司，公司即是独立的个体，公司自身承担责任，而领导公司的人并不等于公司本身。所以公司能够在公司领导退出这个「舞台」时还能够存在。&lt;/p&gt;
&lt;blockquote class=&#34;quote&#34;&gt;
        &lt;p&gt;智人发明出了许许多多的想象现实，也因而发展出许许多多的行为模式，而这正是我们所谓「文化」的主要成分。等到文化出现，就再也无法停止改变和发展，这些无法阻挡的变化，就成了我们说的「历史」。&lt;/p&gt;&lt;/blockquote&gt; 
&lt;p&gt;&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;/life/books/a-brief-history-of-humankind/#fn:2&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;img src=&#34;/images/adam-and-eve-theodore-de-bry.jpg&#34; alt=&#34;adam-and-eve-theodore-de-bry.jpg&#34; title=&#34;知善恶树，亚当和夏娃&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;亚当和夏娃的一天&#34;&gt;亚当和夏娃的一天&lt;/h3&gt;
&lt;p&gt;这一章主要描绘了远古采集社会的生活容貌。作者通过历史资料加上自己的想象，描绘出人类原始生活的样子，繁殖、捕食、斗争等等。在这一章中，出现了一个关键名词：采集者。采集者指的就是狩猎采集的人类。&lt;/p&gt;
&lt;p&gt;作者首先以高热量食物作为例子。现在人们都知道高热量的食物对身体有害，但那些非常好吃诱人的食物往往都是高热量的食物。人们似乎无法放弃这一类「垃圾」。因为过去的采集者在草原或者森林中生活，高热量的食物非常罕见，如果发现这一类食物就一定会立刻吃下以防被其他动物抢夺。&lt;/p&gt;
&lt;p&gt;作者又提出古代社会并非一夫一妻制，一群人共同住在一起，女性可以和多名男性或女性发生性行为形成亲密关系，而成年人共同养育所有的孩子，对他们平等对待。我觉得在现在的社会，一夫一妻制是一种准则，已经成为我们心中认定的文明的一部分，还记得小时候我第一次听说在某些国家一个男人可以与多个女人共同生活的时候，感到非常的惊讶。现在的人们非常看重人与人之间的伦理关系，如果你的身份并不是所谓的正常身份，比如你是「小三」，比如你是一个「妓女的孩子」，那么别人会对你有一种一样的感觉。我认为这就是一种文明的发展。成年人共同养育所有的孩子这一点，虽说在当前的社会下不合适，但我比较支持将所有的孩子平等对待。「幼吾幼以及人之幼」，如果平等对待所有的孩子，摒除对别人家庭出身，社会地位的偏见，这样会减少很多不必要的竞争和人类内耗，孩子的成长道路会轻松很多。&lt;/p&gt;
&lt;p&gt;采集者随着季节的变化不断迁移以获得食物来源。如果在某个地区食物来源特别丰富，就很可能会定居在那里。作者在文中说：&lt;/p&gt;
&lt;blockquote class=&#34;quote&#34;&gt;
        &lt;p&gt;换句话说，采集者对于他们周遭环境的了解，会比现代人更深、更广也更多样。现代的工业社会中，就算不太了解自然环境也能顺利存活。比如如果你是个计算机工程师、保险推销员、历史老师或者工厂工人，你真的需要了解自然环境吗？现代人必须专精于自身小领域的知识，但对于其他生活中的必需，绝大多数都是靠着其他领域的专家，每个人懂的都限于自己的那一小方土地。就整体而言，现今人类所知远超过远古人类。但在个人层面上，远古的采集者则是有史以来最具备多样知识和技能的人类。&lt;/p&gt;&lt;/blockquote&gt; 
&lt;p&gt;或许采集者的知识储备确实比现代人类更广，因为为了生存，他们必须要学会更多的技能以提升自己的优势，赢得活着的权利。现代人类对于某一自己熟悉的领域研究地更为深入，更有深度。采集者们学会的知识讲求的应该是「实用」，他们不会研究其中的原理，而现在我们能够清楚的明白很多事物运转的原理。即是真的像作者所说的那样，每个人懂的都限于自己的那一小方土地，不如采集者的知识储备广泛，但现今人类所知远超过远古人类，讲求的是一种合作，一种知识的共享，我认为这也是一种文明程度的提升，更有利于社会的发展。同样，我也认为，现今人们的生活比采集者们更有意义。这一点与作者的观念相反。作者说现代的富裕社会，人们的劳动时间过长，承担过重的负担，这一点无可否认。农业社会确实恶化了人类营养和健康，这是不可避免的，也是发展的一种趋势，但在精神文化生活层面，难道能说采集者们更为富有吗？他们追求的是自身的存活，因此眼光不如现代人类这么长远，从而他们也就不会探索更多的未知领域，得不到丰富的精神文化生活。&lt;/p&gt;
&lt;p&gt;在这一章中也出现了「泛神论」这一名词。&lt;/p&gt;
&lt;blockquote class=&#34;quote&#34;&gt;
        &lt;p&gt;泛神论相信，几乎任何一个地点、任何一只动物、任何一株植物、任何一种自然现象，都有其意识和情感，并且能够与人类直接沟通。&lt;/p&gt;&lt;/blockquote&gt; 
&lt;p&gt;采集者普遍信奉泛神论的信仰。这让我联想到了《阿凡达》这一部电影。潘多拉星球上的纳美族信奉的就是自然的力量，自然孕育了万物，万物归于自然，他们可以通过自身的器官与其他生物相连，进行心灵的沟通。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/images/avatar.jpg&#34; alt=&#34;avatar.jpg&#34; title=&#34;电影《阿凡达》&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;毁天灭地的人类洪水&#34;&gt;毁天灭地的人类洪水&lt;/h3&gt;
&lt;p&gt;毋庸置疑，人类的存在给自然界的其他生物带来了毁灭性的打击。人类曾经只生活在亚非大陆上，因此在亚非大陆上的各种生物会受到人类活动的影响，因为当时的技术受限，人类造不出一艘能够跨越大洋的船，因此尚未踏上地球的其他地区。同样，大洋隔开的还有别的生物。在美洲、澳洲还有一些与世隔绝的岛屿上，生长着各种奇特的生物，澳洲尤为明显。他们在独立的环境下生长，形成了一条条独特的食物链。假如将亚非大陆的生物带到这些地方，会造成泛滥成灾，比如现在澳洲的兔子。&lt;/p&gt;
&lt;p&gt;澳洲曾经的动物都有着像袋鼠一样的育儿袋，现在还有几种这样的生物存在呢？过去的人类虽有信奉神明这一说法，但他们并不尊重神明赋予他们的生活环境——大自然。人类总是妄想征服自然的一切，所到之地一片狼藉。当人类踏上澳洲的那一刻起，一场场浩劫开始发生。因为当地的动物没有见过人类，他们也就不会惧怕人类，甚至到死也没有意识到，人类是一种凶猛的动物。而且当地的大型动物繁殖非常缓慢，人类的猎杀超过自身的繁殖速度。除此之外，人类还会使用火这一种危险的东西，通过火耕技术将生物栖息的地方变成农田......一场场捕杀造成了很多生物的灭绝。&lt;/p&gt;
&lt;p&gt;有些学者试着为人类脱罪，把这些物种灭绝的责任推给气候变迁。这种说法很难让人接受，作者也给出了辩驳这类说法的理由：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;虽然澳洲气候确实在 45000 年前有一场改变，但规模幅度并不大，人类登陆澳洲的时候，澳洲超过 90% 的巨型动物都从历史上消失了；&lt;/li&gt;
&lt;li&gt;如果是气候变迁导致的物种大灭绝，海洋生物受到的冲击通常不亚于地球生物，但没有任何证据显示 45000 年前海洋生物有显著的灭绝情形；&lt;/li&gt;
&lt;li&gt;类似澳洲这类生物大灭绝的事情，在接下来的几千年还在不断上演，而时间点都在人类又再次移居外面世界的时候。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;作者在这一章提到了大地懒、剑齿虎等等一些已经灭绝的生物。我联想到了《冰河世纪》系列电影，电影中有原始人、猛犸、剑齿虎等生物，还有那个一直寻找松果的小剑齿鼠。还想到了以前听说现代人吃猛犸肉的故事。如果这些生物能存活到现在，或许就会为自然界添加一笔绚丽的色彩。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;/images/ice-age.jpg&#34; alt=&#34;ice-age.jpg&#34; title=&#34;电影《冰河世纪》&#34;&gt;&lt;/p&gt;
&lt;section class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;图源：&lt;a href=&#34;https://en.wikipedia.org/wiki/Chauvet_Cave&#34;&gt;Chauvet Cave | Wikipedia&lt;/a&gt;&amp;#160;&lt;a href=&#34;/life/books/a-brief-history-of-humankind/#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id=&#34;fn:2&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;图源：&lt;a href=&#34;https://fineartamerica.com/featured/adam-and-eve-theodore-de-bry.html&#34;&gt;Adam And Eve | Fine Art America&lt;/a&gt;&amp;#160;&lt;a href=&#34;/life/books/a-brief-history-of-humankind/#fnref:2&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</content>
            
            
            
                
                
                
                    
                    
                    
                        
                            <category scheme="/life/books/" term="life\books\" label="life\books\" />
                        
                    
                
            
            
            
                
                    
                
                    
                        
                            
                            
                            
                                <category scheme="/tags/history/" term="历史" label="历史" />
                            
                        
                            
                            
                            
                                <category scheme="/tags/humankind/" term="人类" label="人类" />
                            
                        
                    
                
            
        </entry>
    
</feed>
